### 结构体 struct

1. 定义：由用户自己建立由不同类型数据组成的组合型的数据结构，被称为**结构体**。在其他高级语言中把这种形式的数据结构称为“**记录**”
2. 特点：**结构体变量所占内存长度是各成员占的内存长度之和**，每个成员分别占有自己的内存单元
3. **结构体规则：**
   - 结构体变量中的成员的引用方式为：结构体变量名.成员名
   - 嵌套的结构体，则用类似于 student1.birthday.month
   - 对结构体的变量的成员可以像普通变量一样进行各种运算
   - 同类型的结构体变量可以相互赋值，比如下面例子可以直接 student1 = student2;
   - 可以引用结构体变量成员或结构体变量的地址,
   ```c
   scanf("%d", &student2.num);
   scanf("%o", &student2);
   ```
4. **结构体指针：指向结构体数据的指针,一个结构体变量的起始地址就是这个结构体变量的指针。**
5. 定义结构体的方式：**只能对结构体变量赋值，存取或运算，而不能对一个类型赋值，存取或运算。在编译时对类型是不分配空间的，只对变量分配空间**

```c
// 定义
struct 结构体名 {  // struct student合起来即为结构体类型名
  成员表列
} 变量名表列
// 例子1：先声明结构体类型，再定义该类型的变量
struct student {
  int num;
  char name[20];
  char sex;
  char addr[20];
}
struct student student1, student2 = { 10101, "shuhongxie", 'M', "guangzhou" };;
// struct student => 结构体类型名  student1,student2 => 结构体变量名
// 例子2：在声明类型的同时定义变量
struct student {
  int num;
  char name[20];
  char sex;
  char addr[20];
} student1, student2 = { 10101, "shuhongxie", 'M', "guangzhou" }; // 直接声明和定义
// 例子3：不指定类型名而直接定义结构体类型变量
struct  {
  int num;
  char name[20];
  char sex;
  char addr[20];
} student1, student2 = { 10101, "shuhongxie", 'M', "guangzhou" }; // 直接声明和定义
```

### 结构体数组

```c
// 定义1
struct 结构体名 {
  成员表列
} 数组名[数组长度];
// 定义2
结构体类型 数组名[数组长度];
struct person leader[3]; // 未初始化
struct person leader[3] = { "Li", 0, "Zhang", 0, "Func", 0 }; // 已初始化

// 示例
struct person {
  char name[20];
  int count;
} leader[3] = {"Li",0,"Zhang",0,"Fun",0};
```

### 结构体指针

1. 定义：**结构体指针就是指向结构体数据的指针，一个结构体变量的起始地址就是这个结构体变量的指针**
2. 指向运算符：(\*p).num 可以变成 p->num;

```c
struct student *pt;

struct student {
  int num;
  float score;
  struct student *next;
} std;
pt = &std;
/*
调用函数体的值，可以写成以下三种形式
1. std.num
2. (*p).num
3. p->num
*/
```

### 用结构体变量和结构体变量的指针做函数参数

1. 结构体变量或结构体成员作为实参进行函数调用时，采取的是“值传递”，等于将结构体变量或结构体成员变量的值传给形参。但如果结构体成员是数组的话除外
2. 结构体指针变量作为实参进行函数调用时，传输的是结构体的地址

### 结构体和动态链表

1. 使用 malloc 方法**动态分配内存**

### 共用体类型

1. 特点：**结构体变量所占内存长度是各成员占的内存长度之和，共用体变量所占内存长度等于最长的成员的长度**
2. 由于共同体变量中的各个成员共用同一块存储空间，因此，在任一时刻，只能存放一个成员的值。
3. 共用体变量中起作用的成员值是最后一次被赋值的成员值。即再次赋值会覆盖之前的值。
4. 共用体变量的地址和它成员的地址都是同一地址
5. **可以对结构体进行赋值，但不能对共用体变量赋值也不能企图引用共用体变量来得到成员的值。**

```c
union data {
  short int i;
  char ch;
  float f;
} a, b,c;
// 共用体不能用变量进行初始化 比如  a = { 2, 'Z', '3.1' }
// 只能这样
a.i = 20;
a.ch = 'X';
a.f = 3.14142;
// 不能引用共用体变量，只能引用共用体变量中的成员 比如a.i
```

### 枚举类型(不重要)

```c
// 定义
enum weekday { sun, mon, tue, wed, thu, fri, sat }; // sun,mon,tue 被称为枚举元素或枚举常量，他们是用户定义的标识符
// 使用
// workday,week_end 被称为枚举变量，他们的值只能是sun到sat之一
enum weekday workday,week_end; // 枚举变量
workday = mon;
week_end = sun
// 也可以直接定义枚举变量
enum weekday { sun, mon, tue, wed, thu,fri,sat } workday,week_end;
```
