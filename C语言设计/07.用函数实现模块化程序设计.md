### 函数的特性

1. 从用户使用角度看，函数分为**库函数**和**用户自定义函数**
2. 从函数的形式看，函数分**有参函数**和**无参函数**
3. 程序结构图

```c
               程序
      |          |              |
   源程序文件a  源程序文件b   源程序文件c
 |    |      |
函数a 函数b 函数c
```

4. 函数不能嵌套定义，函数可以互相调用，但是 main 函数不能互相调用。

### 函数定义

```c
int Column; // 定义全局变量
static int Column // 静态全局变量，只允许当前文件引用，不允许外部文件引用;
int max(int x, int y) {
  if(x > y) return x;
  else return y;
}

int main()
{
  int max(int x, int y); // 函数声明形式1
  int max(int s, int b) // 函数声明形式2 改变参数名称
  int max(int, int) // 函数声明形式2 默认不适用参数
  printf("%d\n", max(3, 4));
}

// 函数定义的一般形式
/*
类型名 函数名()
{
   函数体
}
*/
// 调用函数
/*
 函数名()
 函数名(实参表列)
*/
```

### 函数调用过程(以上面函数定位为例)

1. 在定义函数中指定的形参，在未出现函数调用时，他们并不占用内存中的存储单元，在发生函数调用时，函数 max 中的形参被分配内存单元
2. 将实参对应的值传递给形参
3. 在执行 max 函数期间，由于形参已经有值，就可以进行有关的运算
4. 通过 return 语句将函数值带回到主调函数
5. 调用结束，形参单元被释放
6. **调用函数的方式**：
   - 函数语句：pinrt_star()
   - 函数表达式：c = 2 \* max(a,b);
   - 函数参数:printf("%d", max(a,b));

### 函数调用(普通调用)

重点：**函数形参是按值传递的(传整个数组除外，数组是按地址传递)，就算函数内改变原来参数的值，原来参数的值也不受影响（包括传数组某一项）**，

1. 函数定义：**指对函数功能的确立**，它是一个完整的，独立的函数单位。
2. 函数声明的作用：把函数名，函数参数的个数和参数类型等信息通知编译系统，编译系统能据此识别函数并检查函数调用是否合法，即**对函数调用的合法性进行检查**。**C 语言对形参数组的大小不做检查，因此形参数组可以不指定大小**
3. 函数声明的说明: 如果被调用函数的定义出现在 main 函数之前，那可以不加函数声明
4. 函数原型：就是**函数声明，函数声明也叫函数原型**

```js
/**
函数调用过程范例：
void main() {
   int max(int, int); // 函数声明简写，不写参数名，只写参数类型
   int max(int u, int v) // 函数生命简写，参数名不用x,y，直接使用u,v
}
int max(int x, int y) { // 形参x,y不占内存中的存储单元
   if(x>y) {
      return x;
   } else {
      return y;
   }
}
1. 在定义函数中指定的形参，在未出现函数调用时，他们并不占内存中的存储单元，直到函数发生调用时，函数max中的形参才被分配内存单元
2. 将实参对应的值传递给形参
3. 在执行max期间，由于形参已经有值，就可以进行有关的运算
4. 通过return语句将函数值带回到主调函数
5. 调用结束后，形参单元被释放
 */
```

### 函数调用(传整个数组情况)

1. 用变量名或数组元素名作函数参数时，传递的是变量的值，用数组名作函数参数时，传递的是数组首元素的地址。
2. 由于数组名代表数组首元素的地址，因此只是将数组的首元素的地址传输给对应形参
3. 函数调用时虚实结合的方式：**1. 值传递 2. 地址传递**

### 函数的嵌套调用和递归调用

**嵌套调用**：在调用一个函数过程中调用另外一个函数，称为函数的嵌套调用。
**递归调用**：在调用函数过程中直接或间接地调用该函数本身，称为函数的递归调用。

### 多维数组作为函数实参

1. 在被调用函数中对形参数组进行声明时，可以指定每一维的大小，也可以省略第一维的大小说明, 但不能只指定第一行
   ```c
   // 合法
   float fn(float arr[5][5])
   float fn(float arr[][5])
   // 不合法
   float fn(float arr[][])
   float fn(float arr[4][])
   ```

### 变量的作用域和生存期

1. 变量的作用域：指**变量的有效的范围**，分为局部变量和全局变量
2. 变量的生存期：指**变量存在的时间**
3. 内部变量/局部变量：**在函数或复合语句中定义的变量，只在本函数或复合语句内范围有效**。使用时才分配存储单元，不占用空间。也叫**动态存储方式**,函数内的变量，函数调用完释放回收空间
   - 主函数内的变量也是局部变量
   - 不同函数中可以使用相同名字的变量，他们互不干扰
   - 形参也是局部变量
   - 在函数内部可以在复合语句中定义变量，这些变量只在复合语句中有效
   - 复合语句：**将两条或以上的语句用{}括起来的语句**
4. 外部变量/全局变量：在函数外定义的变量，提前分配存储单元，占用空间。**全局变量的有效范围从定义变量的位置开始到本源程序文件结束，在此范围内可以为本程序文件中的所有函数所共用**，也叫**静态存储方式**，在函数外定义的变量，程序运行过程中都存在。
5. **C 语言程序组成**：一个程序可以包含**一个或若干个源程序文件，而一个源程序文件可以包含一个或若干个函数**。全局变量普通情况下只在一个文件内生效
6. 变量的可见性：一个变量在其作用域内可以被引用，则称此变量在作用域内"可见"
7. 变量的生存期：如果一个变量值在某一时刻是存在的，则认为这一时刻属于该变量的“生存期”,或称该变量在此时刻“存在”

```c
// 全局变量定义
#include <stdio.h>
int Row, Column;

void main() {

}
```

### 变量的存储类别

1. 每一个变量和函数都有两个属性：**数据类型**和**数据存储类别**，定义变量时除了需要定义数据类型外，还可以指定定义其存储类别

### 变量的存储类别分类

1. auto: 声明自动变量，比如函数形参和在函数中定义的变量，在函数调用结束时就自动释放这些存储空间，所以这类变量被称为**自动变量**，auto 关键字可以省略。它属于动态存储类别

```c
auto int b,c = 3;
```

2. static：声明静态变量，函数中的静态局部变量在调用结束后不消失而保留原值。该变量在整个程序运行期间都不释放空间(缩略图 239)，静态局部变量不赋初值时，会自动赋初值 0(对数值型变量)或空字符(对字符变量)，如果希望外部变量只限于被本文件引用，只能用于本文件的外部变量，称为**静态外部变量**
   - static 对局部变量：使变量由动态存储改变为静态存储方式。
   - static 对全局变量：使全局变量局部化，只能被本文件引用

```c
static int f = 1; // 只初始化一次，在程序运行期间都不释放空间，不能被外部其他文件所引用
```

3. register：寄存器变量。一些频繁使用的变量(比如循环 10000 次)，每次循环都要引用局部变量，这种频繁操作的变量每次存储都会花费很多时间，为提高效率直接放 cpu 的寄存器中，增加存取速度

```c
register int f;
```

4. extern：**声明外部变量的作用范围**，
   - 作用 1：**在一个文件内扩展外部变量的作用域**， 因为全局变量的作用域只在于从定义点到文件结束(全局变量不一定写在最头部)，这样会导致上面的函数引用不到全局变量(缩略图 241)
   - 作用 2：**将外部变量的作用域扩展到其他文件**

```c
// global.c
int globalVar = 10;

// main.c
#include <stdio.h>

extern int globalVar;  // extern关键字声明全局变量，引用global.c内的变量

int main() {
  extern int juan; // 拓展全局变量的作用域
  printf("Global variable: %d\n", globalVar);
  printf("%d\n", juan); // 2
  return 0;
}

int juan = 2; // 当前变量有效范围从该位置开始到本源程序文件
```

### 内部函数和外部函数

1. 内部函数：又称**静态函数**，只能被本文件中的其他函数所调用，不同文件中有同名的内部函数互不干扰，比如 static int fun(int a, int b);
2. 外部函数：定义时在函数处加 extern 的函数，可以被其他文件调用，**extern 可省略**，比如 extern int fun(int a, int b);

```c
// functions.c
#include <stdio.h>

void printMessage()
{
    printf("Hello, extern!\n");
}

// main.c

int main() {
  // 引用外部函数
  extern void printMessage();
}
```

## 做题中的易错点

1. 函数中不管有没有 return 语句，都会返回一个值，只不过没定义的时候这个返回值不确定，
